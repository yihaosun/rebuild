(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c00fb140"],{"7ee2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table_title1"},[a("span",{staticStyle:{"margin-left":"10px"}},[a("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.addProject}},[e._v("新增项目")])],1),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[a("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.downProject}},[e._v("导出excel")])],1)]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"15px","margin-bottom":"10px"},attrs:{round:""},on:{click:function(t){return e.queryCriteria()}}},[e._v("查询条件")]),e._v(" "),e.isTag?a("div",{staticStyle:{position:"absolute",top:"120px",left:"120px"}},[e._l(e.dynamicTags[0],function(t){return a("el-tag",{key:t,staticStyle:{color:"black","background-color":"#ffffff",border:"1px","margin-left":"10px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(1,t)}}},[e._v("\n        "+e._s(t)+"\n      ")])}),e._v(" "),1==e.clearBtn?a("span",{staticStyle:{color:"blue","font-size":"14px","margin-left":"30px"},on:{click:function(t){return e.allClear()}}},[e._v("清除")]):e._e()],2):e._e(),e._v(" "),1==e.isQueryCriteria?a("div",{staticClass:"title_selete"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"单位名称:"}},[a("el-input",{model:{value:e.nameUnit,callback:function(t){e.nameUnit=t},expression:"nameUnit"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"申报金额:"}},[a("el-input",{model:{value:e.amountDeclared,callback:function(t){e.amountDeclared=t},expression:"amountDeclared"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"申报时间"}},[a("el-date-picker",{staticStyle:{width:"174px"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"请选择日期"},model:{value:e.formInline.dateTime,callback:function(t){e.$set(e.formInline,"dateTime",t)},expression:"formInline.dateTime"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"审批状态:"}},[a("el-input",{model:{value:e.examiStatus,callback:function(t){e.examiStatus=t},expression:"examiStatus"}})],1),a("br"),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"90%"}},[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",round:""},on:{click:function(t){return e.isDiplayTag()}}},[e._v("确定")])],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"table_wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData.slice((e.currpage-1)*e.pageSize,e.currpage*e.pageSize),"row-class-name":e.tableRowClassName,"row-key":"ID",border:"","max-height":"700","header-cell-style":{"background-color":"#F2F2F2",color:"#606266 ","border-bottom":"1px solid #fff","text-align":"center"},"cell-style":{"text-align":"center"}}},[a("el-table-column",{attrs:{label:"序号",width:"70",fixed:"",type:"index",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"OPERATION",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",disabled:e.isType},on:{click:function(a){return e.handleClick(t.row)}}},[a("svg-icon",{staticStyle:{"font-size":"25px"},attrs:{"icon-class":"bianji"}},[e._v("\n                编辑\n              ")])],1),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",disabled:e.isType}},[a("svg-icon",{staticStyle:{"font-size":"25px"},attrs:{"icon-class":"delete"}},[e._v("\n                删除\n              ")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"NAME",label:"项目名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ISACCEPT",label:"审批状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["待审核"==t.row.ISACCEPT?a("span",[e._v(e._s(t.row.ISACCEPT))]):(t.row.ISACCEPT,a("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.ISACCEPT))]))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"MONEY",label:"申报金额",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"已用指标",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"在途指标",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"可用指标",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"PROBMUNIT",label:"单位",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"DECLAREDATE",label:"申报时间",width:"300"}})],1),e._v(" "),a("div",{staticClass:"pagination_wrap"},[a("el-pagination",{attrs:{"page-sizes":[20,40,60,80],"page-size":20,layout:"sizes, prev, pager, next",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"新增项目",visible:e.dialogTableVisible,width:"60%",top:"5vh"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("div",{staticClass:"tableContent"},[a("div",{staticClass:"table_title"},[e._v("项目信息")]),e._v(" "),a("div",{staticStyle:{padding:"15px","text-align":"left"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{staticStyle:{"margin-right":"15px"},attrs:{label:"项目名称:"}},[a("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.formInline.projectName,callback:function(t){e.$set(e.formInline,"projectName",t)},expression:"formInline.projectName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-right":"15px"},attrs:{label:"申报金额:"}},[a("el-input",{attrs:{placeholder:"请输入申报金额"},model:{value:e.formInline.declareMoney,callback:function(t){e.$set(e.formInline,"declareMoney",t)},expression:"formInline.declareMoney"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"申报时间"}},[a("el-date-picker",{staticStyle:{width:"174px"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"请选择日期"},model:{value:e.formInline.dateTime,callback:function(t){e.$set(e.formInline,"dateTime",t)},expression:"formInline.dateTime"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-right":"5px"},attrs:{label:"预算类型:"}},[a("el-select",{attrs:{placeholder:"请选择预算类型"},model:{value:e.formInline.budgetType,callback:function(t){e.$set(e.formInline,"budgetType",t)},expression:"formInline.budgetType"}},e._l(e.budgetTypeoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-right":"5px"},attrs:{label:"启始时间:"}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"year",format:"yyyy",placeholder:"请选择日期"},model:{value:e.formInline.startTime,callback:function(t){e.$set(e.formInline,"startTime",t)},expression:"formInline.startTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"终止时间"}},[a("el-date-picker",{staticStyle:{width:"174px"},attrs:{type:"year",format:"yyyy",placeholder:"请选择日期"},model:{value:e.formInline.endTime,callback:function(t){e.$set(e.formInline,"endTime",t)},expression:"formInline.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否纳入资金监管内容"}},[a("el-radio-group",{model:{value:e.formInline.supervise,callback:function(t){e.$set(e.formInline,"supervise",t)},expression:"formInline.supervise"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("div",{staticClass:"table_title"},[e._v("申报人信息")]),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{label:"申报人:"}},[a("el-input",{attrs:{placeholder:"请输入申报人"},model:{value:e.formInline.declareName,callback:function(t){e.$set(e.formInline,"declareName",t)},expression:"formInline.declareName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{label:"单位:"}},[a("el-input",{attrs:{placeholder:"请输入单位"},model:{value:e.formInline.declareCompany,callback:function(t){e.$set(e.formInline,"declareCompany",t)},expression:"formInline.declareCompany"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{label:"联系电话:"}},[a("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.formInline.declarePhone,callback:function(t){e.$set(e.formInline,"declarePhone",t)},expression:"formInline.declarePhone"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-right":"10px",width:"calc(100%)"},attrs:{label:"备注:"}},[a("el-input",{staticStyle:{width:"calc(100vw/2)"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入备注"},model:{value:e.formInline.remarks,callback:function(t){e.$set(e.formInline,"remarks",t)},expression:"formInline.remarks"}})],1)],1),e._v(" "),a("div",{staticClass:"table_title"}),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-form-item",{staticStyle:{"margin-right":"10px",width:"calc(100%)"},attrs:{label:"项目依据:"}},[a("el-input",{staticStyle:{width:"calc(100vw/2)"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入项目依据"},model:{value:e.formInline.basis,callback:function(t){e.$set(e.formInline,"basis",t)},expression:"formInline.basis"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-right":"10px",width:"calc(100%)"},attrs:{label:"项目内容:"}},[a("el-input",{staticStyle:{width:"calc(100vw/2)"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入项目内容"},model:{value:e.formInline.content,callback:function(t){e.$set(e.formInline,"content",t)},expression:"formInline.content"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-right":"10px",width:"calc(100%)"},attrs:{label:"项目绩效:"}},[a("el-input",{staticStyle:{width:"calc(100vw/2)"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入项目绩效"},model:{value:e.formInline.achievements,callback:function(t){e.$set(e.formInline,"achievements",t)},expression:"formInline.achievements"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"fujian"},[a("div",{staticStyle:{flex:"1"}},[e._v("添加附件:")]),e._v(" "),a("div",{staticStyle:{flex:"9"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"123","http-request":e.uploadSectionFile,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,limit:10,"on-exceed":e.handleExceed,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[a("i",{staticClass:"el-icon-upload el-icon--right"}),e._v("选取文件\n          ")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("一次性只能上传10个文件")])],1)],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.timeoutSave}},[e._v("暂存")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitDate}},[e._v("申办")])],1)])],1)},l=[],n=(a("7f7f"),a("b775"));function o(e){return Object(n["a"])({url:"/project/getList",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/project/add",method:"post",data:e})}var s={data:function(){return{examiStatus:"",amountDeclared:"",isTag:!1,isType:!1,isTableLength:0,isQueryCriteria:!1,dynamicTags:[],inputVisible:!1,inputValue:"",budgetTypeoptions:[{id:1,value:"本年追加预算"},{id:2,value:"本年年初预算"},{id:3,value:"下年年初预算"}],nameUnit:"",currpage:1,pageSize:20,tableData:[],dialogTableVisible:!1,eid:"",eid_isbn:"",guid:0,isaccept:-1,isleaf:0,itemsourcescode:0,clearBtn:!0,fileList:[],formInline:{projectName:"",declareMoney:"",dateTime:"",budgetType:"",startTime:"",endTime:"",supervise:"",declareName:"",declareCompany:"",declarePhone:"",remarks:"",basis:"",content:"",achievements:""}}},methods:{isDiplayTag:function(){this.isTag=!0,this.isQueryCriteria=!1,this.dynamicTags.push({name:this.nameUnit,status:this.examiStatus}),console.log(this.dynamicTags[0].name)},allClear:function(){this.dynamicTags="",this.clearBtn=!1},handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)},queryCriteria:function(){this.isQueryCriteria=!0},tableRowClassName:function(e){e.row;var t=e.rowIndex;e.isTableLength;return t%2==0?"warning-row":"success-row"},downProject:function(){},addProject:function(){this.dialogTableVisible=!0},timeoutSave:function(){var e=this,t=localStorage.getItem("CBMUNITID");r({name:this.formInline.projectName,eid:"232323",eid_isbn:"1212",guid:0,isleaf:0,money:this.formInline.declareMoney,declaredate:this.formInline.dateTime,budgetType:this.formInline.budgetType,startyear:this.formInline.startTime,endyear:this.formInline.endTime,issupervise:this.formInline.supervise,manager:this.formInline.declareName,declareCompany:"",phone:this.formInline.declarePhone,remarks:this.formInline.remarks,itemcause:this.formInline.basis,content:this.formInline.content,itembrieaf:this.formInline.achievements,itemsourcescode:0,isaccept:-1,cbmunitid:t,itemtype:0,spantype:0,standard_code:"sddsds",year:0}).then(function(t){e.loading=!1,e.tableData=t.dataList,e.getDateSource()}).catch(function(e){console.log(cuowu)})},submitDate:function(){},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currpage=e},indexMethod:function(e){return(this.currpage-1)*this.pageSize+e+1},clearBack:function(){this.dialogTableVisible2=!1,this.$refs.upload.clearFiles(),this.getSourceDate(this.activeTabsName,this.startDate,this.endDate,this.valueContent)},handleExceed:function(e,t){this.$message.warning("当前限制选择 10 个文件；")},submitUpload:function(){this.$refs.upload.submit()},uploadSectionFile:function(e){var t=this;this.loadingFlag=!0;var a=e.file,i=(a.type,a.size),l=a.name.lastIndexOf("."),n=(a.name.substring(0,l),a.name.substring(l+1),i/1024/1024<2);if(n){var o=new FormData,r=localStorage.getItem("CPOSTGUID");o.append("upfile",a),o.append("CBMUNITID",this.cbmunitid),o.append("OPERATOR",this.nickName),o.append("IYEAR",this.year),o.append("POWER",this.power),o.append("CPOSTGUID",r);var s={headers:{"Content-Type":"multipart/form-data"}};axios.request({url:"".concat("/prod-api","/pay/customisze/import"),method:"post",data:o,config:s,onUploadProgress:function(t){var a=t.loaded/t.total*100|0;e.onProgress({percent:a})}}).then(function(a){setTimeout(function(){e.onSuccess(),t.loadingFlag=!1},3e3),console.log("上传成功")}).catch(function(a){console.log("上传失败"),e.onError(),t.loadingFlag=!1})}else this.$message.error("只能上传文件大小小于2M")},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},getDateSource:function(e,t,a,i,l,n,r,s){var c=this;this.loading=!0,o({CBMUNITID:e,DECLAREDATE:t,ISACCEPT:a,ISFINANCE:i,MONEY:l,PROBMUNIT:n,STATUS:r,YEAR:s}).then(function(e){c.loading=!1,c.tableData=e.dataList,c.isTableLength=c.tableData.length}).catch(function(e){setTimeout(function(){c.loading=!1,c.showButton=!1,c.tableData=[]},1500)})},params:function(){}},created:function(){var e=localStorage.getItem("CBMUNITID");this.getDateSource(e,"","",0,"","",1,"2019")}},c=s,m=(a("9ad0"),a("2877")),d=Object(m["a"])(c,i,l,!1,null,null,null);t["default"]=d.exports},"9ad0":function(e,t,a){"use strict";var i=a("d8c5"),l=a.n(i);l.a},d8c5:function(e,t,a){}}]);